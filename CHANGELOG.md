# 更新日志

所有本项目的变更日志都将记录在此文件中。

### v0.10.0 - 性能与稳定性的飞跃 (2025.07)
- ✨ **高级图片加载**: 实现高级图片加载功能，包括多种加载策略、内存和磁盘缓存、Bitmap复用池及内存压力管理。
- ⚡️ **Compose 性能极致优化**:
    - 全面采用 `ImmutableList` 替代 `List` 提升数据稳定性。
    - 为数据类添加 `@Stable` 注解，大幅提升重组性能。
    - 广泛使用 `derivedStateOf` 优化状态计算，避免不必要的重组。
    - 通过 `remember` 记忆化回调，减少 Lambda 实例创建。
- ♻️ **MVI 状态访问重构**:
    - 重构所有核心页面 (`Home`, `Login`, `Book`, `Read`, `Search`) 的状态访问方式，实现更细粒度的订阅，显著提高 Composable 函数的 `skippable` 比例。
    - 废弃了旧的 `collectAsState` 模式。
- 🏗️ **底层架构加固**:
    - 引入 `StableThrowable` 优化异常处理流程。
    - 重构网络层以原生支持 `ImmutableList` 的序列化与反序列化。
- 🚀 **引入 Baseline Profile**: 为应用启动和关键用户路径（首页、阅读器）添加 `Baseline Profile`，显著提升性能。

### v0.9.0 - 全面拥抱 MVI 架构 (2025.07)
- 🏗️ **MVI 基础组件**: 实现 `BaseMviViewModel`, `MviIntent`, `MviState`, `MviReducer` 等核心组件。
- ♻️ **核心模块重构**:
    - 将书籍详情、首页、搜索、登录模块完全重构为 MVI 架构。
    - UI 层实现零业务逻辑，仅负责状态展示与意图转发。
- ✨ **StateAdapter 模式**: 引入 `StateAdapter` 以提供更细粒度的状态流，优化 Compose 重组性能。
- ✅ **全面测试覆盖**: 为重构后的模块添加了完整的单元、组件、集成和性能测试。
- 🌉 **RN 桥接重构**: 将原有的 RN 桥接模块按功能域拆分为 `Settings` 和 `Navigation`，提升可维护性。
- 🔧 **阅读器代码重构**: 提取重复模型到 `ReaderModels.kt`，并重构了所有相关用例。

### v0.8.0 - 设置与跨端同步 (2025.06)
- 🛠️ **混合架构设置页**: 实现 Android Compose 导航 + React Native 内容区域的混合架构设置页面。
- 💾 **智能缓存管理**: 提供缓存大小计算、格式化显示、一键清空功能。
- 🎨 **完整主题切换**: 支持浅色/深色/跟随系统模式，并实现定时自动切换功能。
- ✨ **个人中心页面 (RN)**: 采用 `Zustand` 实现状态管理，完成个人中心页面。
- 🔄 **主题跨端同步**: 实现 Android 与 RN 之间主题状态的双向同步。
- ⚡️ **ReactRootView 复用**: 引入 `ReactRootView` 实例缓存与复用机制，提升 RN 页面加载性能。
- 📝 **新增页面**: 添加了隐私政策与帮助支持页面。

### v0.7.0 - 搜索与智能缓存 (2025.06)
- 🔍 **搜索功能完善**:
    - 实现搜索页面，支持搜索历史、热门榜单。
    - 实现搜索结果页，支持高级分类筛选。
    - 实现完整榜单页面，优化了滚动体验。
- 💾 **通用智能缓存系统**:
    - `NetworkCacheManager`: 实现通用的内存+磁盘双层网络缓存管理器。
    - `Cache-First` 策略: 默认采用先缓存后网络的离线优先策略。
    - `Repository` 模式: 封装缓存逻辑与状态管理，实现 `CachedBookRepository`。
    - `SMART_FALLBACK` 策略: 增加智能兜底，在缓存失效时自动尝试网络请求。
- 🎨 **骨架屏体验**: 为页面加载过程添加 `Shimmer` 骨架屏动画，提升用户体验。

### v0.6.0 - 阅读器架构重构 (2025.06)
- 📚 **全书架构**: 重构阅读器为全书管理模式，一次性获取和管理所有章节。
- 📊 **智能页数统计**: 基于全书内容实现页数计算与缓存，支持渐进式计算和绝对页码导航。
- 💾 **章节预加载与进度保存**:
    - 实现邻页预加载功能。
    - 实现阅读进度（章节、页码）的精确保存与恢复。
- ✨ **无缝阅读体验**: 将书籍详情页集成为阅读器的第 0 页，实现无缝翻页进入阅读。
- 🐛 **手势冲突修复**: 修复阅读器平移模式下的手势冲突和页面回跳问题。

### v0.5.0 - 小说阅读器核心功能 (2025.06)
- ✨ **动态文本分页**: 实现 `PageSplitter`，根据屏幕尺寸和字体设置对章节内容进行动态分页。
- 🎨 **多种翻页效果**:
    - 实现页面卷曲 (`PageCurl`)、仿真覆盖 (`CoverFlip`)、平移 (`Slide`)、垂直滚动和无动画等多种翻页模式。
    - 实现了逼真的页面卷曲阴影、厚度和高光效果。
- ⚙️ **阅读器设置面板**:
    - 支持亮度调节、字体大小调节、背景色切换、翻页效果切换。
- 📖 **章节列表**: 实现章节列表面板，方便用户快速跳转。

### v0.4.0 - 书籍详情与3D动画 (2025.05)
- ✨ **书籍详情页**: 实现书籍详情页，包含封面、作者、简介、统计数据、书评等模块。
- 🎨 **半屏简介弹窗**: 点击简介“更多”按钮可展示半屏弹窗，支持拖拽关闭。
- 🔄 **iOS 风格侧滑返回**: 实现 `iosSwipeBack` 手势，提供流畅的侧滑返回体验。
- 🦋 **3D 翻书动画**:
    - 实现 `FlipBookAnimation`，支持从首页到书籍详情页的 3D 翻书过渡动画。
    - 新增“放大透明”动画效果。

### v0.3.0 - 首页与核心服务 (2025.05)
- ✨ **全新首页**:
    - 实现首页布局，包含顶部搜索栏、分类筛选器、榜单、推荐书籍瀑布流。
    - 支持下拉刷新和上拉加载更多。
- 💾 **数据层**: 为首页各模块添加 `Room` 数据库缓存。
- 🔧 **核心服务**:
    - 新增 `HomeService`, `BookService`, `AuthorService`, `SearchService`, `NewsService`, `AiService` 等多个网络服务接口。
- ⚡️ **性能优化**: 为首页瀑布流实现图片高度缓存，避免重组时重复计算。

### v0.2.0 - 登录注册与基础架构 (2025.05)
- ✨ **登录注册**:
    - 实现完整的登录、注册流程，包含 UI、状态管理和动画效果。
    - 支持图形验证码功能。
- 🔐 **安全**: 实现 `CryptoManager`，使用 `AndroidKeyStore` 对敏感数据进行加密存储。
- 🏗️ **基础架构**:
    - 搭建 `Retrofit` + `OkHttp` 网络请求框架，支持 `Hilt` 依赖注入。
    - 实现 `BaseViewModel` 和通用的加载状态组件 (`LoadingStateComponent`)。
    - 建立 `Room` 数据库基础。
- 💾 **用户数据持久化**: 实现 `UserRepository`，负责用户信息的本地缓存和管理。

### v0.1.0 - 项目初始化与 RN/Compose 集成 (2025.05)
- 🎉 **项目创建**: 使用 `react-native` 初始化项目。
- 🏗️ **RN/Compose 集成**: 在 `ComposeMainActivity` 中成功集成并显示 React Native 页面。
- ⚙️ **基础配置**: 完成 `babel`, `typescript`, `eslint` 等前端基础配置。
- 📄 **文档初始化**: 创建 `README.md`，记录项目基本信息。 